jQuery(function($){let bookingEntry=$(".detail-booking-entrypoint");if(bookingEntry.length>0){let bookingEntryTransportType=$('.booking-filter-radio--transport-type input[type="radio"]');let bookingEntryAirportField=$(".booking-filter-item--airport");bookingEntryTransportType.on("change",function(e){var thisType=$(this).val();if(thisType=="FLUG"){bookingEntryAirportField.removeClass("d-none")}else{bookingEntryAirportField.addClass("d-none")}});let bookingEntryCalendar=$(".booking-filter-field--date-range");let bookingEntryCalendarRenderTarget=$("#booking-entry-calendar");let bookingEntryCalendarServiceUrl="/wp-content/themes/travelshop/pm-ajax-endpoint.php?action=detail-booking-calendar";bookingEntryCalendar.on("click touch",function(e){e.preventDefault();var getTransportType,getAirport,getDur,getOffer,getMediaObject=null;getTransportType=$('.booking-filter-radio--transport-type input[type="radio"]:checked').val();getDur=$(".booking-filter-field--duration").val();getOffer=$(".booking-filter-field--offer").val();getMediaObject=$(".booking-filter-field--mediaobject").val();if(getTransportType==="FLUG"){getAirport=bookingEntryAirportField.find('input[type="radio"]:checked').val()}renderBookingCalendar(getTransportType,getAirport,getDur,getOffer,getMediaObject);$(".dropdown, .dropdown-menu").removeClass("show");e.stopPropagation()});function initCalendarSlider(){var sliderWrapper=".booking-entrypoint-calendar-outer";var sliderContainer=sliderWrapper+" .booking-entrypoint-calendar-inner";var sliderItems=".calendar-item";if($("body").find(sliderWrapper+" "+sliderItems).length>2){var calenderSlider=tns({container:sliderContainer,items:2,slideBy:1,nav:false,mouseDrag:true,loop:false,gutter:30,disable:true,responsive:{768:{disable:false}},controls:true,controlsContainer:sliderWrapper+" .slider-controls"})}}function requestHandlerBookingCalendar(request){$.ajax({url:bookingEntryCalendarServiceUrl,data:request,type:"POST",dataType:"html",beforeSend:function(xhr){console.log("before send");bookingEntryCalendarRenderTarget.addClass("is-loading")},success:function(data){bookingEntryCalendarRenderTarget.html(data);bookingEntryCalendarRenderTarget.removeClass("is-loading");initCalendarSlider();if(!$(".booking-filter-item--date-range").hasClass("open")){$(".booking-filter-item--date-range").addClass("open")}bookingCalendarInteraction()}})}function refreshBookingCalendar(transportType,airport,duration,offer,mediaObject){renderBookingCalendar(transportType,airport,duration,offer,mediaObject)}function bookingCalendarInteraction(){var travelDate=bookingEntryCalendarRenderTarget.find(".travel-date a");var durationSwitch=bookingEntryCalendarRenderTarget.find(".booking-entrypoint-calender-duration button");durationSwitch.on("click touch",function(e){e.preventDefault();if(!$(this).hasClass("active")){var getAirport=null;var getDur=$(this).data("duration");var getTransportType=$('.booking-filter-radio--transport-type input[type="radio"]:checked').val();var getOffer=$(".booking-filter-field--offer").val();var getMediaObject=$(".booking-filter-field--mediaobject").val();if(getTransportType==="FLUG"){getAirport=bookingEntryAirportField.find('input[type="radio"]:checked').val()}durationSwitch.removeClass("active");$(this).addClass("active");refreshBookingCalendar(getTransportType,getAirport,getDur,getOffer,getMediaObject)}e.stopPropagation()});var storeCurrentEnteredTravelDate=null;travelDate.on("mouseenter",function(e){var thisTravelDate=$(this);var thisTravelDateID=$(this).thisTravelDate.data("anchor");storeCurrentEnteredTravelDate=$(this);var thisDaterangeItems=bookingEntryCalendarRenderTarget.find(".travel-date-"+thisTravelDateID);thisDaterangeItems.addClass("daterange-preview active-duration");thisDaterangeItems.last().addClass("active-duration-last");storeCurrentEnteredTravelDate.bind("mouseout",function(e){var thisDaterangePreviewItems=bookingEntryCalendarRenderTarget.find(".daterange-preview");thisDaterangePreviewItems.removeClass("active-duration");thisDaterangePreviewItems.removeClass("active-duration-last");thisDaterangePreviewItems.removeClass("daterange-preview")})});travelDate.on("mouseout",function(e){$(this).unbind("mouseout")});travelDate.on("click touch",function(e){e.preventDefault();var thisTravelDate=$(this);var thisTravelDatePrice=thisTravelDate.data("price-html");var thisTravelDateID=thisTravelDate.data("anchor");var thisTravelDateRange=thisTravelDate.data("daterange");var thisTravelDateDur=parseInt(thisTravelDate.data("duration"));bookingEntryCalendarRenderTarget.find(".active-duration").removeClass("active-duration");bookingEntryCalendarRenderTarget.find(".active-duration-last").removeClass("active-duration-last");bookingEntryCalendarRenderTarget.find(".travel-date.active").removeClass("active");thisTravelDate.parent().addClass("active");var thisDaterangeItems=bookingEntryCalendarRenderTarget.find(".travel-date-"+thisTravelDateID);thisDaterangeItems.addClass("active-duration");thisDaterangeItems.last().addClass("active-duration-last");$(".booking-filter-field--offer").val(thisTravelDateID);$(".booking-filter-field--duration").val(thisTravelDateDur);$(".booking-filter-item--date-range .booking-filter-field--text").text(thisTravelDateRange);if(thisTravelDatePrice!==""){$(".booking-action-row .price-box-discount").html(thisTravelDatePrice)}e.stopPropagation()});$(".booking-calendar-close").on("click touch",function(e){e.preventDefault();$(this).parents(".booking-filter-item--date-range").removeClass("open");e.stopPropagation()})}function renderBookingCalendar(transportType,airport,duration,offer,mediaObject){var calendarRequest={"pm-tr":transportType,airport:airport,"pm-du":duration,offer:offer,media_object_id:mediaObject};requestHandlerBookingCalendar(calendarRequest)}}});